<!-- Главный HTML-документ для AstroPred -->
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AstroPred</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* Стили для скрытия и отображения секций */
    .hidden { display: none; }
    .form-section { display: none; }
    .form-section.active { display: block; }
    .forecast-error { color: red; font-style: italic; }
    .social-btn { margin: 0 10px; } /* Отступы для кнопок WhatsApp и Telegram */
  </style>
</head>
<body class="bg-gray-100 font-sans">

  <!-- Навигационная панель -->
  <nav class="bg-indigo-600 text-white p-4">
    <div class="container mx-auto flex justify-between items-center">
      <div class="text-2xl font-bold">AstroPred</div>
      <div class="space-x-4">
        <a href="#form" class="hover:underline" onclick="showSection('form-section')">Анкета</a>
        <a href="#daily" class="hover:underline" onclick="showSection('daily-forecast')">Прогноз на день</a>
        <a href="#weekly" class="hover:underline" onclick="showSection('weekly-forecast')">Прогноз на неделю</a>
        <a href="#monthly" class="hover:underline" onclick="showSection('monthly-forecast')">Прогноз на месяц</a>
      </div>
    </div>
  </nav>

  <!-- Основной контейнер -->
  <div class="container mx-auto p-6">

    <!-- Секция анкеты -->
    <div id="form-section" class="form-section active">
      <h2 class="text-2xl font-bold mb-4">Анкета</h2>
      <div class="bg-white p-6 rounded-lg shadow-md">
        
        <!-- Форма ввода данных -->
        <div id="form-input" class="form-content">
          <!-- Личные данные -->
          <div id="step1" class="step active">
            <h3 class="text-xl font-semibold mb-4">Личные данные</h3>
            <div class="mb-4">
              <label class="block text-gray-700">Имя:</label>
              <input type="text" id="name" class="w-full p-2 border rounded" placeholder="Пожалуйста, введите ваше имя">
              <p class="text-red-500 text-sm hidden" id="name-error">Пожалуйста, введите ваше имя</p>
            </div>
            <div class="mb-4">
              <label class="block text-gray-700">Пол:</label>
              <select id="gender" class="w-full p-2 border rounded">
                <option value="">Выберите</option>
                <option value="Мужской">Мужской</option>
                <option value="Женский">Женский</option>
              </select>
              <p class="text-red-500 text-sm hidden" id="gender-error">Пожалуйста, выберите пол</p>
            </div>
            <button onclick="nextStep(1)" class="bg-indigo-600 text-white p-2 rounded hover:bg-indigo-700">Далее</button>
          </div>

          <!-- Астрология -->
          <div id="step2" class="step hidden">
            <h3 class="text-xl font-semibold mb-4">Астрология</h3>
            <div class="mb-4">
              <label class="block text-gray-700">Дата рождения:</label>
              <input type="date" id="birthdate" class="w-full p-2 border rounded" placeholder="Пожалуйста, введите корректную дату">
              <p class="text-red-500 text-sm hidden" id="birthdate-error">Пожалуйста, введите корректную дату</p>
            </div>
            <div class="mb-4">
              <label class="block text-gray-700">Время рождения (необязательно):</label>
              <input type="time" id="birthtime" class="w-full p-2 border rounded" placeholder="Формат: чч:мм (24-часовой)">
            </div>
            <div class="mb-4">
              <label class="block text-gray-700">Город рождения:</label>
              <input type="text" id="birthcity" class="w-full p-2 border rounded" placeholder="Пожалуйста, укажите город рождения">
              <p class="text-red-500 text-sm hidden" id="birthcity-error">Пожалуйста, укажите город рождения</p>
            </div>
            <button onclick="prevStep(2)" class="bg-gray-500 text-white p-2 rounded hover:bg-gray-600">Назад</button>
            <button onclick="nextStep(2)" class="bg-indigo-600 text-white p-2 rounded hover:bg-indigo-700">Далее</button>
          </div>

          <!-- Интересы -->
          <div id="step3" class="step hidden">
            <h3 class="text-xl font-semibold mb-4">Интересы</h3>
            <div class="mb-4">
              <label class="block text-gray-700">Основной интерес:</label>
              <select id="interest" class="w-full p-2 border rounded">
                <option value="">Выберите</option>
                <option value="Любовь и отношения">Любовь и отношения</option>
                <option value="Карьера и бизнес">Карьера и бизнес</option>
                <option value="Финансы и инвестиции">Финансы и инвестиции</option>
                <option value="Здоровье и благополучие">Здоровье и благополучие</option>
                <option value="Семья и дети">Семья и дети</option>
                <option value="Личностный рост">Личностный рост</option>
                <option value="Творчество и вдохновение">Творчество и вдохновение</option>
                <option value="Путешествия и переезды">Путешествия и переезды</option>
              </select>
              <p class="text-red-500 text-sm hidden" id="interest-error">Пожалуйста, выберите интерес</p>
            </div>
            <div class="mb-4">
              <label class="block text-gray-700">Семейное положение:</label>
              <select id="marital" class="w-full p-2 border rounded">
                <option value="">Выберите</option>
                <option value="В отношениях">В отношениях</option>
                <option value="Не в отношениях">Не в отношениях</option>
                <option value="В поиске">В поиске</option>
              </select>
              <p class="text-red-500 text-sm hidden" id="marital-error">Пожалуйста, укажите семейное положение</p>
            </div>
            <button onclick="prevStep(3)" class="bg-gray-500 text-white p-2 rounded hover:bg-gray-600">Назад</button>
            <button onclick="saveForm()" class="bg-indigo-600 text-white p-2 rounded hover:bg-indigo-700">Сохранить анкету</button>
          </div>
        </div>

        <!-- Просмотр анкеты (только для чтения) -->
        <div id="form-view" class="form-content hidden">
          <h3 class="text-xl font-semibold mb-4">Ваши данные</h3>
          <div class="mb-4">
            <p><strong>Имя:</strong> <span id="view-name"></span></p>
            <p><strong>Пол:</strong> <span id="view-gender"></span></p>
            <p><strong>Дата рождения:</strong> <span id="view-birthdate"></span></p>
            <p><strong>Время рождения:</strong> <span id="view-birthtime"></span></p>
            <p><strong>Город рождения:</strong> <span id="view-birthcity"></span></p>
            <p><strong>Основной интерес:</strong> <span id="view-interest"></span></p>
            <p><strong>Семейное положение:</strong> <span id="view-marital"></span></p>
          </div>
          <button onclick="editForm()" class="bg-indigo-600 text-white p-2 rounded hover:bg-indigo-700">Редактировать</button>
        </div>
      </div>
    </div>

    <!-- Секция прогноза на день -->
    <div id="daily-forecast" class="form-section hidden">
      <h2 class="text-2xl font-bold mb-4">Прогноз на день</h2>
      <div class="bg-white p-6 rounded-lg shadow-md">
        <p class="forecast-error">Не удалось получить прогноз. Пожалуйста, попробуйте позже.</p>
      </div>
    </div>

    <!-- Секция прогноза на неделю -->
    <div id="weekly-forecast" class="form-section hidden">
      <h2 class="text-2xl font-bold mb-4">Прогноз на неделю</h2>
      <div class="bg-white p-6 rounded-lg shadow-md">
        <p class="forecast-error">Не удалось получить прогноз. Пожалуйста, попробуйте позже.</p>
      </div>
    </div>

    <!-- Секция прогноза на месяц -->
    <div id="monthly-forecast" class="form-section hidden">
      <h2 class="text-2xl font-bold mb-4">Прогноз на месяц</h2>
      <div class="bg-white p-6 rounded-lg shadow-md">
        <p class="forecast-error">Не удалось получить прогноз. Пожалуйста, попробуйте позже.</p>
      </div>
    </div>

    <!-- Секция социальных кнопок -->
    <div class="mt-6 flex justify-center">
      <a href="https://t.me/share/url?url=@astropred_bot" class="social-btn bg-green-500 text-white p-2 rounded hover:bg-green-600">
        <i class="fab fa-telegram-plane"></i> Telegram
      </a>
      <a href="https://wa.me/?text=Хочу%20поделиться%20с%20тобой%20этим%20астроботом%20—%20реально%20интересно!%20Прогноз%20на%20день,%20месяц,%20совместимость%20и%20ещё%20куча%20всего.%20Вот%20ссылка:%20@astropred_bot" 
         class="social-btn bg-green-600 text-white p-2 rounded hover:bg-green-700">
        <i class="fab fa-whatsapp"></i> WhatsApp
      </a>
    </div>

    <!-- Кнопка "Поделиться приложением" -->
    <div class="mt-6 flex justify-center">
      <button onclick="shareApp()" class="bg-blue-500 text-white p-2 rounded hover:bg-blue-600">
        <i class="fas fa-share-alt"></i> Поделиться приложением
      </button>
    </div>

  </div>

  <!-- JavaScript для управления формой и секциями -->
  <script>
    // Показать нужную секцию
    function showSection(sectionId) {
      document.querySelectorAll('.form-section').forEach(section => {
        section.classList.remove('active');
      });
      document.getElementById(sectionId).classList.add('active');
    }

    // Переход между шагами формы
    function nextStep(currentStep) {
      let valid = true;
      if (currentStep === 1) {
        valid = validateStep1();
      } else if (currentStep === 2) {
        valid = validateStep2();
      }
      if (valid) {
        document.getElementById('step' + currentStep).classList.remove('active');
        document.getElementById('step' + (currentStep + 1)).classList.add('active');
      }
    }

    // Возврат на предыдущий шаг
    function prevStep(currentStep) {
      document.getElementById('step' + currentStep).classList.remove('active');
      document.getElementById('step' + (currentStep - 1)).classList.add('active');
    }

    // Валидация первого шага
    function validateStep1() {
      let valid = true;
      const name = document.getElementById('name').value;
      const gender = document.getElementById('gender').value;
      if (!name) {
        document.getElementById('name-error').classList.remove('hidden');
        valid = false;
      } else {
        document.getElementById('name-error').classList.add('hidden');
      }
      if (!gender) {
        document.getElementById('gender-error').classList.remove('hidden');
        valid = false;
      } else {
        document.getElementById('gender-error').classList.add('hidden');
      }
      return valid;
    }

    // Валидация второго шага
    function validateStep2() {
      let valid = true;
      const birthdate = document.getElementById('birthdate').value;
      const birthcity = document.getElementById('birthcity').value;
      if (!birthdate) {
        document.getElementById('birthdate-error').classList.remove('hidden');
        valid = false;
      } else {
        document.getElementById('birthdate-error').classList.add('hidden');
      }
      if (!birthcity) {
        document.getElementById('birthcity-error').classList.remove('hidden');
        valid = false;
      } else {
        document.getElementById('birthcity-error').classList.add('hidden');
      }
      return valid;
    }

    // Сохранение формы
    function saveForm() {
      const interest = document.getElementById('interest').value;
      const marital = document.getElementById('marital').value;
      let valid = true;
      if (!interest) {
        document.getElementById('interest-error').classList.remove('hidden');
        valid = false;
      } else {
        document.getElementById('interest-error').classList.add('hidden');
      }
      if (!marital) {
        document.getElementById('marital-error').classList.remove('hidden');
        valid = false;
      } else {
        document.getElementById('marital-error').classList.add('hidden');
      }
      if (valid) {
        // Сохранение данных в localStorage
        localStorage.setItem('name', document.getElementById('name').value);
        localStorage.setItem('gender', document.getElementById('gender').value);
        localStorage.setItem('birthdate', document.getElementById('birthdate').value);
        localStorage.setItem('birthtime', document.getElementById('birthtime').value);
        localStorage.setItem('birthcity', document.getElementById('birthcity').value);
        localStorage.setItem('interest', document.getElementById('interest').value);
        localStorage.setItem('marital', document.getElementById('marital').value);
        // Показать данные только для чтения
        showFormData();
        document.getElementById('form-input').classList.add('hidden');
        document.getElementById('form-view').classList.remove('hidden');
      }
    }

    // Отображение данных анкеты
    function showFormData() {
      document.getElementById('view-name').textContent = localStorage.getItem('name') || 'Не указано';
      document.getElementById('view-gender').textContent = localStorage.getItem('gender') || 'Не указано';
      document.getElementById('view-birthdate').textContent = localStorage.getItem('birthdate') || 'Не указано';
      document.getElementById('view-birthtime').textContent = localStorage.getItem('birthtime') || 'Не указано';
      document.getElementById('view-birthcity').textContent = localStorage.getItem('birthcity') || 'Не указано';
      document.getElementById('view-interest').textContent = localStorage.getItem('interest') || 'Не указано';
      document.getElementById('view-marital').textContent = localStorage.getItem('marital') || 'Не указано';
    }

    // Редактирование формы
    function editForm() {
      document.getElementById('form-view').classList.add('hidden');
      document.getElementById('form-input').classList.remove('hidden');
      document.getElementById('step3').classList.remove('active');
      document.getElementById('step1').classList.add('active');
    }

    // Поделиться приложением
    function shareApp() {
      const shareText = "Хочу поделиться с тобой этим астроботом — реально интересно! Прогноз на день, месяц, совместимость и ещё куча всего. Вот ссылка: @astropred_bot";
      if (navigator.share) {
        navigator.share({
          title: 'AstroPred',
          text: shareText,
          url: 'https://t.me/astropred_bot'
        }).then(() => {
          console.log('Успешно поделились');
        }).catch((error) => {
          console.error('Ошибка при поделиться:', error);
        });
      } else {
        // Fallback для браузеров без Web Share API
        alert('Поделитесь этим текстом: ' + shareText);
      }
    }

    // Загрузка данных при открытии страницы
    window.onload = function() {
      if (localStorage.getItem('name')) {
        showFormData();
        document.getElementById('form-input').classList.add('hidden');
        document.getElementById('form-view').classList.remove('hidden');
      }
    };
  </script>

</body>
</html>
