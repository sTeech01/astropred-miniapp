<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AstroPred</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/awesomplete/1.1.5/awesomplete.min.css">
  <style>
    :root {
      --primary-color: #9370db;
      --secondary-color: #6a5acd;
      --text-color: #f0f0f0;
      --bg-color: #0a0a1a;
      --card-color: rgba(22, 33, 62, 0.8);
      --error-color: #ff6b6b;
      --success-color: #4caf50;
    }
    
    body {
      margin: 0;
      font-family: 'Inter', sans-serif;
      color: var(--text-color);
      padding: 20px;
      transition: all 0.3s ease;
      position: relative;
      overflow-x: hidden;
      min-height: 100vh;
      background: var(--bg-color);
    }
    
    #stars-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      overflow: hidden;
      will-change: transform;
      contain: strict;
    }
    
    .star {
      position: absolute;
      background-color: #fff;
      border-radius: 50%;
      animation: twinkle var(--duration) infinite ease-in-out;
      will-change: opacity;
      backface-visibility: hidden;
    }
    
    @keyframes twinkle {
      0%, 100% { opacity: 0.2; }
      50% { opacity: 1; }
    }
    
    h1 {
      text-align: center;
      margin-bottom: 20px;
      color: var(--primary-color);
    }
    
    .theme-switch {
      position: absolute;
      top: 20px;
      right: 20px;
      cursor: pointer;
      z-index: 10;
      color: var(--primary-color);
      background: rgba(0,0,0,0.3);
      padding: 8px;
      border-radius: 50%;
      width: 36px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .language-switcher {
      position: absolute;
      top: 20px;
      left: 20px;
      z-index: 10;
      background: rgba(0,0,0,0.3);
      padding: 5px;
      border-radius: 8px;
    }
    
    nav {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
      margin-bottom: 20px;
    }
    
    nav button {
      background: var(--card-color);
      color: var(--text-color);
      border: none;
      padding: 10px 20px;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: 600;
    }
    
    nav button.active, nav button:hover {
      background: var(--primary-color);
      color: #fff;
    }
    
    section {
      display: none;
      background: var(--card-color);
      padding: 25px;
      border-radius: 15px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.3);
      backdrop-filter: blur(5px);
      border: 1px solid rgba(255,255,255,0.1);
      animation: fadeIn 0.5s ease forwards;
    }
    
    section.active {
      display: block;
    }
    
    form {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }
    
    .form-group {
      position: relative;
      animation: fadeIn 0.5s ease forwards;
      opacity: 0;
    }
    
    label {
      font-weight: 600;
      display: block;
      margin-bottom: 8px;
      color: var(--text-color);
    }
    
    label i {
      margin-right: 8px;
      color: var(--primary-color);
      width: 20px;
      text-align: center;
    }
    
    .field-hint {
      font-size: 12px;
      color: var(--primary-color);
      margin-top: 4px;
      font-style: italic;
    }
    
    input, select, button, textarea {
      padding: 12px 15px;
      border-radius: 10px;
      border: 1px solid rgba(255,255,255,0.2);
      font-size: 16px;
      width: 100%;
      box-sizing: border-box;
      background: rgba(0,0,0,0.3);
      color: var(--text-color);
      transition: all 0.3s ease;
    }
    
    input:focus, select:focus {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 2px rgba(106, 90, 205, 0.3);
      outline: none;
    }
    
    input:invalid, select:invalid {
      border-color: var(--error-color);
    }
    
    button {
      background-color: var(--primary-color);
      color: #fff;
      border: none;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      margin-top: 10px;
      padding: 14px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }
    
    button:hover {
      background-color: var(--secondary-color);
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }
    
    button:disabled {
      background-color: #555;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }
    
    .loader {
      display: none;
      width: 20px;
      height: 20px;
      border: 3px solid rgba(255,255,255,0.3);
      border-radius: 50%;
      border-top-color: #fff;
      animation: spin 1s ease-in-out infinite;
      position: absolute;
      right: 15px;
      top: 50%;
      transform: translateY(-50%);
    }
    
    @keyframes spin {
      to { transform: translateY(-50%) rotate(360deg); }
    }
    
    .error-message {
      color: var(--error-color);
      font-size: 13px;
      margin-top: 5px;
      display: none;
    }
    
    .zodiac-display {
      display: inline-block;
      margin-left: 10px;
      padding: 5px 10px;
      background: rgba(106, 90, 205, 0.3);
      border-radius: 15px;
      font-size: 14px;
      color: var(--primary-color);
    }
    
    .forecast-container, .compatibility-container {
      background: var(--card-color);
      padding: 25px;
      border-radius: 15px;
      margin-top: 20px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.3);
      backdrop-filter: blur(5px);
      border: 1px solid rgba(255,255,255,0.1);
      animation: slideUp 0.5s ease forwards;
    }
    
    .forecast-header {
      text-align: center;
      margin-bottom: 20px;
      color: var(--primary-color);
    }
    
    .forecast-content {
      line-height: 1.6;
    }
    
    .forecast-section {
      margin-bottom: 15px;
      padding-bottom: 15px;
      border-bottom: 1px dashed rgba(255,255,255,0.1);
    }
    
    .forecast-section h3 {
      color: var(--primary-color);
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    @keyframes slideUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .compatibility-result {
      margin-top: 15px;
      padding: 15px;
      background: rgba(106, 90, 205, 0.2);
      border-radius: 10px;
    }
    
    .compatibility-meter {
      height: 20px;
      background: rgba(0,0,0,0.3);
      border-radius: 10px;
      margin: 10px 0;
      overflow: hidden;
    }
    
    .compatibility-progress {
      height: 100%;
      background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
      width: 0;
      transition: width 1s ease;
    }
    
    .notification-banner {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: var(--primary-color);
      color: white;
      padding: 12px 20px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      z-index: 100;
      display: none;
      animation: fadeInUp 0.3s ease;
    }
    
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateX(-50%) translateY(20px); }
      to { opacity: 1; transform: translateX(-50%) translateY(0); }
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .consultation-message {
      display: none;
      margin-top: 15px;
      padding: 10px;
      background: rgba(106, 90, 205, 0.2);
      border-radius: 10px;
      text-align: center;
      color: var(--text-color);
    }
    
    @media (max-width: 600px) {
      body {
        padding: 15px;
      }
      
      section {
        padding: 15px;
      }
      
      .theme-switch, .language-switcher {
        position: relative;
        top: auto;
        right: auto;
        left: auto;
        margin-bottom: 15px;
      }
      
      #stars-container {
        animation: none;
      }
      
      .star {
        animation: none;
        opacity: 0.5;
      }
      
      nav {
        flex-direction: column;
      }
      
      nav button {
        width: 100%;
        text-align: center;
      }
    }
    
    input[type="color"] {
      height: 50px;
      padding: 5px;
      cursor: pointer;
    }
    
    .loading-icon {
      display: inline-block;
      width: 16px;
      height: 16px;
      border: 2px solid rgba(255,255,255,0.3);
      border-radius: 50%;
      border-top-color: white;
      animation: spin 1s linear infinite;
    }
    
    .preloader {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: var(--bg-color);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      color: var(--primary-color);
      font-size: 20px;
      animation: fadeOut 1s ease forwards;
      animation-delay: 1s;
    }
    
    @keyframes fadeOut {
      to { opacity: 0; visibility: hidden; }
    }
  </style>
</head>
<body>
  <div class="preloader" id="preloader">Загрузка приложения...</div>
  <div id="stars-container"></div>
  
  <div class="theme-switch" id="themeSwitch">
    <i class="fas fa-moon"></i>
  </div>
  
  <div class="language-switcher">
    <select id="languageSelect">
      <option value="ru">Русский</option>
      <option value="en">English</option>
    </select>
  </div>

  <h1>AstroPred</h1>
  
  <nav>
    <button class="active" data-tab="profile">Анкета</button>
    <button data-tab="daily">Прогноз на день</button>
    <button data-tab="weekly">Прогноз на неделю</button>
    <button data-tab="monthly">Прогноз на месяц</button>
    <button data-tab="compatibility">Узнать совместимость</button>
  </nav>
  
  <section id="profile" class="active">
    <form id="profileForm">
      <div class="form-group" style="animation-delay: 0.1s">
        <label for="name"><i class="fas fa-user"></i><span data-lang="name">Имя:</span></label>
        <input type="text" id="name" name="name" required />
        <div class="error-message" id="name-error" data-lang="name-error">Пожалуйста, введите ваше имя</div>
      </div>
      <div class="form-group" style="animation-delay: 0.2s">
        <label for="birth_date"><i class="fas fa-calendar-day"></i><span data-lang="birth_date">Дата рождения:</span></label>
        <input type="date" id="birth_date" name="birth_date" required />
        <div class="error-message" id="birth_date-error" data-lang="birth_date-error">Пожалуйста, введите корректную дату</div>
        <div id="zodiacDisplay" class="zodiac-display" style="display: none;"></div>
      </div>
      <div class="form-group" style="animation-delay: 0.3s">
        <label for="birth_time"><i class="fas fa-clock"></i><span data-lang="birth_time">Время рождения (необязательно):</span></label>
        <input type="time" id="birth_time" name="birth_time" />
        <div class="field-hint" data-lang="time_format">Формат: чч:мм (24-часовой)</div>
      </div>
      <div class="form-group" style="animation-delay: 0.4s">
        <label for="birth_city"><i class="fas fa-city"></i><span data-lang="birth_city">Город рождения:</span></label>
        <input type="text" id="birth_city" name="birth_city" required />
        <div class="error-message" id="birth_city-error" data-lang="birth_city-error">Пожалуйста, укажите город рождения</div>
      </div>
      <div class="form-group" style="animation-delay: 0.5s">
        <label for="gender"><i class="fas fa-venus-mars"></i><span data-lang="gender">Пол:</span></label>
        <select id="gender" name="gender" required>
          <option value="" data-lang="select">Выберите</option>
          <option value="м" data-lang="male">Мужской</option>
          <option value="ж" data-lang="female">Женский</option>
        </select>
        <div class="error-message" id="gender-error" data-lang="gender-error">Пожалуйста, выберите пол</div>
      </div>
      <div class="form-group" style="animation-delay: 0.6s">
        <label for="interest"><i class="fas fa-star"></i><span data-lang="interest">Основной интерес:</span></label>
        <select id="interest" name="interest" required>
          <option value="" data-lang="select">Выберите</option>
          <option value="Любовь и отношения" data-lang="love">Любовь и отношения</option>
          <option value="Карьера и бизнес" data-lang="career">Карьера и бизнес</option>
          <option value="Финансы и инвестиции" data-lang="finance">Финансы и инвестиции</option>
          <option value="Здоровье и благополучие" data-lang="health">Здоровье и благополучие</option>
          <option value="Семья и дети" data-lang="family">Семья и дети</option>
          <option value="Личностный рост" data-lang="growth">Личностный рост</option>
          <option value="Творчество и вдохновение" data-lang="creativity">Творчество и вдохновение</option>
          <option value="Путешествия и переезды" data-lang="travel">Путешествия и переезды</option>
          <option value="Духовное развитие" data-lang="spiritual">Духовное развитие</option>
          <option value="Образование и обучение" data-lang="education">Образование и обучение</option>
          <option value="Важные решения" data-lang="decisions">Важные решения</option>
        </select>
        <div class="error-message" id="interest-error" data-lang="interest-error">Пожалуйста, выберите интерес</div>
      </div>
      <div class="form-group" style="animation-delay: 0.7s">
        <label for="relationship"><i class="fas fa-heart"></i><span data-lang="relationship">Семейное положение:</span></label>
        <select id="relationship" name="relationship" required>
          <option value="" data-lang="select">Выберите</option>
          <option value="В паре" data-lang="in_relationship">В отношениях</option>
          <option value="Не в паре" data-lang="not_in_relationship">Не в отношениях</option>
          <option value="В поиске" data-lang="searching">В поиске</option>
          <option value="В сложных отношениях" data-lang="complicated">В сложных отношениях</option>
        </select>
        <div class="error-message" id="relationship-error" data-lang="relationship-error">Пожалуйста, укажите семейное положение</div>
      </div>
      <div class="form-group" style="animation-delay: 0.8s">
        <label for="children"><i class="fas fa-baby"></i><span data-lang="children">Есть ли дети:</span></label>
        <select id="children" name="children" required>
          <option value="" data-lang="select">Выберите</option>
          <option value="Да" data-lang="yes">Да</option>
          <option value="Нет" data-lang="no">Нет</option>
          <option value="Планируем" data-lang="planning">Планируем</option>
        </select>
        <div class="error-message" id="children-error" data-lang="children-error">Пожалуйста, укажите, есть ли у вас дети</div>
      </div>
      <div class="form-group" style="animation-delay: 0.9s">
        <label for="favorite_color"><i class="fas fa-palette"></i><span data-lang="favorite_color">Любимый цвет:</span></label>
        <input type="color" id="favorite_color" name="favorite_color" value="#6a5acd" required />
        <div class="error-message" id="favorite_color-error" data-lang="color-error">Пожалуйста, выберите цвет</div>
      </div>
      <div class="form-group" style="animation-delay: 1.0s">
        <label for="fears"><i class="fas fa-flushed"></i><span data-lang="fears">Страхи или тревоги (необязательно):</span></label>
        <textarea id="fears" name="fears" rows="2"></textarea>
      </div>
      <div class="form-group" style="animation-delay: 1.1s">
        <label><input type="checkbox" id="receiveNewsletter" name="receive_newsletter" /><span data-lang="newsletter">Получать еженедельный астропрогноз</span></label>
      </div>
      <button type="submit" id="saveProfileBtn" style="animation-delay: 1.2s">
        <i class="fas fa-save"></i><span data-lang="save_profile">Сохранить анкету</span>
        <span class="loader" id="profileLoader"></span>
      </button>
      <button type="button" id="backToMenuProfile" style="animation-delay: 1.3s">
        <i class="fas fa-arrow-left"></i><span data-lang="back_to_menu">Вернуться к меню</span>
      </button>
    </form>
  </section>
  
  <section id="daily">
    <div class="forecast-container">
      <div class="forecast-header">
        <h2><i class="fas fa-crystal-ball"></i><span data-lang="daily_forecast">Ваш персональный прогноз на день</span></h2>
        <p id="dailyForecastDate"></p>
      </div>
      <div class="forecast-content" id="dailyForecastContent"></div>
      <button id="consultationDailyBtn">
        <i class="fas fa-calendar-check"></i><span data-lang="consultation">Записаться на персональную консультацию</span>
      </button>
      <div class="consultation-message" id="consultationDailyMessage" data-lang="consultation_message">
        Функция персональной консультации будет доступна в следующем обновлении. Спасибо за интерес!
      </div>
      <button id="backToMenuDaily">
        <i class="fas fa-arrow-left"></i><span data-lang="back_to_menu">Вернуться к меню</span>
      </button>
    </div>
  </section>
  
  <section id="weekly">
    <div class="forecast-container">
      <div class="forecast-header">
        <h2><i class="fas fa-crystal-ball"></i><span data-lang="weekly_forecast">Ваш персональный прогноз на неделю</span></h2>
        <p id="weeklyForecastDate"></p>
      </div>
      <div class="forecast-content" id="weeklyForecastContent"></div>
      <button id="consultationWeeklyBtn">
        <i class="fas fa-calendar-check"></i><span data-lang="consultation">Записаться на персональную консультацию</span>
      </button>
      <div class="consultation-message" id="consultationWeeklyMessage" data-lang="consultation_message">
        Функция персональной консультации будет доступна в следующем обновлении. Спасибо за интерес!
      </div>
      <button id="backToMenuWeekly">
        <i class="fas fa-arrow-left"></i><span data-lang="back_to_menu">Вернуться к меню</span>
      </button>
    </div>
  </section>
  
  <section id="monthly">
    <div class="forecast-container">
      <div class="forecast-header">
        <h2><i class="fas fa-crystal-ball"></i><span data-lang="monthly_forecast">Ваш персональный прогноз на месяц</span></h2>
        <p id="monthlyForecastDate"></p>
      </div>
      <div class="forecast-content" id="monthlyForecastContent"></div>
      <button id="consultationMonthlyBtn">
        <i class="fas fa-calendar-check"></i><span data-lang="consultation">Записаться на персональную консультацию</span>
      </button>
      <div class="consultation-message" id="consultationMonthlyMessage" data-lang="consultation_message">
        Функция персональной консультации будет доступна в следующем обновлении. Спасибо за интерес!
      </div>
      <button id="backToMenuMonthly">
        <i class="fas fa-arrow-left"></i><span data-lang="back_to_menu">Вернуться к меню</span>
      </button>
    </div>
  </section>
  
  <section id="compatibility">
    <div class="compatibility-container">
      <h2><i class="fas fa-heart"></i><span data-lang="compatibility">Анализ совместимости</span></h2>
      <div class="form-group">
        <label><i class="fas fa-user"></i><span data-lang="your_data">Ваши данные:</span></label>
        <p id="userData"></p>
      </div>
      <form id="compatibilityForm">
        <div class="form-group" style="animation-delay: 0.1s">
          <label for="partner_name"><i class="fas fa-user"></i><span data-lang="partner_name">Имя партнера:</span></label>
          <input type="text" id="partner_name" name="partner_name" required />
          <div class="error-message" id="partner_name-error" data-lang="partner_name-error">Пожалуйста, введите имя партнера</div>
        </div>
        <div class="form-group" style="animation-delay: 0.2s">
          <label for="partner_birth_date"><i class="fas fa-calendar-day"></i><span data-lang="partner_birth_date">Дата рождения партнера:</span></label>
          <input type="date" id="partner_birth_date" name="partner_birth_date" required />
          <div class="error-message" id="partner_birth_date-error" data-lang="partner_birth_date-error">Пожалуйста, введите корректную дату</div>
          <div id="partnerZodiacDisplay" class="zodiac-display" style="display: none;"></div>
        </div>
        <div class="form-group" style="animation-delay: 0.3s">
          <label for="partner_gender"><i class="fas fa-venus-mars"></i><span data-lang="partner_gender">Пол партнера:</span></label>
          <select id="partner_gender" name="partner_gender" required>
            <option value="" data-lang="select">Выберите</option>
            <option value="м" data-lang="male">Мужской</option>
            <option value="ж" data-lang="female">Женский</option>
          </select>
          <div class="error-message" id="partner_gender-error" data-lang="gender-error">Пожалуйста, выберите пол</div>
        </div>
        <div class="form-group" style="animation-delay: 0.4s">
          <label for="partner_zodiac"><i class="fas fa-star"></i><span data-lang="partner_zodiac">Знак зодиака партнера:</span></label>
          <select id="partner_zodiac" name="partner_zodiac">
            <option value="" data-lang="dont_know">Не знаю</option>
            <option value="Овен">Овен</option>
            <option value="Телец">Телец</option>
            <option value="Близнецы">Близнецы</option>
            <option value="Рак">Рак</option>
            <option value="Лев">Лев</option>
            <option value="Дева">Дева</option>
            <option value="Весы">Весы</option>
            <option value="Скорпион">Скорпион</option>
            <option value="Стрелец">Стрелец</option>
            <option value="Козерог">Козерог</option>
            <option value="Водолей">Водолей</option>
            <option value="Рыбы">Рыбы</option>
          </select>
        </div>
        <div class="form-group" style="animation-delay: 0.5s">
          <label for="relationship_duration"><i class="fas fa-clock"></i><span data-lang="relationship_duration">Как долго вы вместе (если применимо):</span></label>
          <select id="relationship_duration" name="relationship_duration">
            <option value="" data-lang="not_applicable">Не применимо</option>
            <option value="less_6m" data-lang="less_6m">Менее 6 месяцев</option>
            <option value="6_12m" data-lang="6_12m">6-12 месяцев</option>
            <option value="1_3y" data-lang="1_3y">1-3 года</option>
            <option value="3_5y" data-lang="3_5y">3-5 лет</option>
            <option value="more_5y" data-lang="more_5y">Более 5 лет</option>
          </select>
        </div>
        <button type="submit" id="analyzeCompatibilityBtn" style="animation-delay: 0.6s">
          <i class="fas fa-heart"></i><span data-lang="analyze_compatibility">Анализировать совместимость</span>
          <span class="loader" id="compatibilityLoader"></span>
        </button>
      </form>
      <div class="compatibility-result" id="compatibilityResult" style="display: none;">
        <p data-lang="compatibility_with">Совместимость с вашим партнером:</p>
        <div class="compatibility-meter">
          <div class="compatibility-progress" id="compatibilityProgress"></div>
        </div>
        <p id="compatibilityText"></p>
      </div>
      <button id="backToMenuCompatibility">
        <i class="fas fa-arrow-left"></i><span data-lang="back_to_menu">Вернуться к меню</span>
      </button>
    </div>
  </section>
  
  <div class="notification-banner" id="notificationBanner"></div>
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/awesomplete/1.1.5/awesomplete.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const tg = window.Telegram && window.Telegram.WebApp;
      if (tg) {
        tg.expand();
        tg.enableClosingConfirmation();
      }
      
      const elements = {
        preloader: document.getElementById('preloader'),
        starsContainer: document.getElementById('stars-container'),
        themeSwitch: document.getElementById('themeSwitch'),
        languageSelect: document.getElementById('languageSelect'),
        navButtons: document.querySelectorAll('nav button'),
        sections: document.querySelectorAll('section'),
        profileForm: document.getElementById('profileForm'),
        saveProfileBtn: document.getElementById('saveProfileBtn'),
        profileLoader: document.getElementById('profileLoader'),
        zodiacDisplay: document.getElementById('zodiacDisplay'),
        compatibilityForm: document.getElementById('compatibilityForm'),
        analyzeCompatibilityBtn: document.getElementById('analyzeCompatibilityBtn'),
        compatibilityLoader: document.getElementById('compatibilityLoader'),
        partnerZodiacDisplay: document.getElementById('partnerZodiacDisplay'),
        compatibilityResult: document.getElementById('compatibilityResult'),
        compatibilityProgress: document.getElementById('compatibilityProgress'),
        compatibilityText: document.getElementById('compatibilityText'),
        userData: document.getElementById('userData'),
        notificationBanner: document.getElementById('notificationBanner'),
        consultationDailyBtn: document.getElementById('consultationDailyBtn'),
        consultationWeeklyBtn: document.getElementById('consultationWeeklyBtn'),
        consultationMonthlyBtn: document.getElementById('consultationMonthlyBtn'),
        consultationDailyMessage: document.getElementById('consultationDailyMessage'),
        consultationWeeklyMessage: document.getElementById('consultationWeeklyMessage'),
        consultationMonthlyMessage: document.getElementById('consultationMonthlyMessage'),
        backToMenuProfile: document.getElementById('backToMenuProfile'),
        backToMenuDaily: document.getElementById('backToMenuDaily'),
        backToMenuWeekly: document.getElementById('backToMenuWeekly'),
        backToMenuMonthly: document.getElementById('backToMenuMonthly'),
        backToMenuCompatibility: document.getElementById('backToMenuCompatibility')
      };
      
      function createStars() {
        elements.starsContainer.innerHTML = '';
        const starsCount = window.innerWidth < 600 ? 100 : 200;
        const containerWidth = window.innerWidth;
        const containerHeight = window.innerHeight;
        const fragment = document.createDocumentFragment();
        
        for (let i = 0; i < starsCount; i++) {
          const star = document.createElement('div');
          star.classList.add('star');
          const size = Math.random() * 3;
          const x = Math.random() * containerWidth;
          const y = Math.random() * containerHeight;
          const duration = 2 + Math.random() * 3 + 's';
          const delay = Math.random() * 5 + 's';
          
          star.style.width = `${size}px`;
          star.style.height = `${size}px`;
          star.style.left = `${x}px`;
          star.style.top = `${y}px`;
          star.style.setProperty('--duration', duration);
          star.style.animationDelay = delay;
          
          fragment.appendChild(star);
        }
        
        elements.starsContainer.appendChild(fragment);
      }
      createStars();
      window.addEventListener('resize', createStars);
      
      const cities = ['Москва', 'Санкт-Петербург', 'Новосибирск', 'Екатеринбург', 'Казань', 
                     'Нижний Новгород', 'Челябинск', 'Самара', 'Омск', 'Ростов-на-Дону', 'Кострома', 'Тарко-Сале', 'Губкинский'];
      new Awesomplete(document.getElementById('birth_city'), {
        list: cities,
        minChars: 1,
        maxItems: 5,
        autoFirst: true
      });
      
      elements.themeSwitch.addEventListener('click', function() {
        document.body.classList.toggle('light-mode');
        const icon = this.querySelector('i');
        if (document.body.classList.contains('light-mode')) {
          icon.classList.replace('fa-moon', 'fa-sun');
          document.documentElement.style.setProperty('--bg-color', '#f9f9ff');
          document.documentElement.style.setProperty('--text-color', '#333');
          document.documentElement.style.setProperty('--card-color', '#fff');
        } else {
          icon.classList.replace('fa-sun', 'fa-moon');
          document.documentElement.style.setProperty('--bg-color', '#0a0a1a');
          document.documentElement.style.setProperty('--text-color', '#f0f0f0');
          document.documentElement.style.setProperty('--card-color', 'rgba(22, 33, 62, 0.8)');
        }
        localStorage.setItem('themePreference', document.body.classList.contains('light-mode') ? 'light' : 'dark');
      });
      
      const savedTheme = localStorage.getItem('themePreference');
      if (savedTheme === 'light') {
        document.body.classList.add('light-mode');
        elements.themeSwitch.querySelector('i').classList.replace('fa-moon', 'fa-sun');
        document.documentElement.style.setProperty('--bg-color', '#f9f9ff');
        document.documentElement.style.setProperty('--text-color', '#333');
        document.documentElement.style.setProperty('--card-color', '#fff');
      }
      
      function getZodiacSign(day, month) {
        if ((month == 3 && day >= 21) || (month == 4 && day <= 19)) return 'Овен';
        if ((month == 4 && day >= 20) || (month == 5 && day <= 20)) return 'Телец';
        if ((month == 5 && day >= 21) || (month == 6 && day <= 20)) return 'Близнецы';
        if ((month == 6 && day >= 21) || (month == 7 && day <= 22)) return 'Рак';
        if ((month == 7 && day >= 23) || (month == 8 && day <= 22)) return 'Лев';
        if ((month == 8 && day >= 23) || (month == 9 && day <= 22)) return 'Дева';
        if ((month == 9 && day >= 23) || (month == 10 && day <= 22)) return 'Весы';
        if ((month == 10 && day >= 23) || (month == 11 && day <= 21)) return 'Скорпион';
        if ((month == 11 && day >= 22) || (month == 12 && day <= 21)) return 'Стрелец';
        if ((month == 12 && day >= 22) || (month == 1 && day <= 19)) return 'Козерог';
        if ((month == 1 && day >= 20) || (month == 2 && day <= 18)) return 'Водолей';
        if ((month == 2 && day >= 19) || (month == 3 && day <= 20)) return 'Рыбы';
        return '';
      }
      
      document.getElementById('birth_date').addEventListener('change', function() {
        const date = new Date(this.value);
        const day = date.getDate();
        const month = date.getMonth() + 1;
        const zodiac = getZodiacSign(day, month);
        if (zodiac) {
          elements.zodiacDisplay.textContent = zodiac;
          elements.zodiacDisplay.style.display = 'inline-block';
        } else {
          elements.zodiacDisplay.style.display = 'none';
        }
      });
      
      document.getElementById('partner_birth_date').addEventListener('change', function() {
        const date = new Date(this.value);
        const day = date.getDate();
        const month = date.getMonth() + 1;
        const zodiac = getZodiacSign(day, month);
        if (zodiac) {
          elements.partnerZodiacDisplay.textContent = zodiac;
          elements.partnerZodiacDisplay.style.display = 'inline-block';
          document.getElementById('partner_zodiac').value = zodiac;
        } else {
          elements.partnerZodiacDisplay.style.display = 'none';
        }
      });
      
      function calculateCompatibility(zodiac1, zodiac2) {
        if (!zodiac1 || !zodiac2) return { score: 0, text: translations[elements.languageSelect.value].insufficient_data };
        
        const compatibilityMap = {
          'Овен': { 'Овен': 70, 'Телец': 40, 'Близнецы': 80, 'Рак': 30, 'Лев': 90, 'Дева': 50, 'Весы': 60, 'Скорпион': 45, 'Стрелец': 85, 'Козерог': 55, 'Водолей': 75, 'Рыбы': 35 },
          'Телец': { 'Овен': 40, 'Телец': 75, 'Близнецы': 50, 'Рак': 85, 'Лев': 45, 'Дева': 90, 'Весы': 65, 'Скорпион': 80, 'Стрелец': 55, 'Козерог': 95, 'Водолей': 60, 'Рыбы': 70 },
          'Близнецы': { 'Овен': 80, 'Телец': 50, 'Близнецы': 65, 'Рак': 40, 'Лев': 70, 'Дева': 55, 'Весы': 85, 'Скорпион': 60, 'Стрелец': 75, 'Козерог': 45, 'Водолей': 90, 'Рыбы': 50 },
          'Рак': { 'Овен': 30, 'Телец': 85, 'Близнецы': 40, 'Рак': 80, 'Лев': 35, 'Дева': 75, 'Весы': 50, 'Скорпион': 90, 'Стрелец': 45, 'Козерог': 70, 'Водолей': 55, 'Рыбы': 95 },
          'Лев': { 'Овен': 90, 'Телец': 45, 'Близнецы': 70, 'Рак': 35, 'Лев': 85, 'Дева': 40, 'Весы': 75, 'Скорпион': 50, 'Стрелец': 80, 'Козерог': 55, 'Водолей': 65, 'Рыбы': 60 },
          'Дева': { 'Овен': 50, 'Телец': 90, 'Близнецы': 55, 'Рак': 75, 'Лев': 40, 'Дева': 70, 'Весы': 60, 'Скорпион': 85, 'Стрелец': 45, 'Козерог': 80, 'Водолей': 50, 'Рыбы': 65 },
          'Весы': { 'Овен': 60, 'Телец': 65, 'Близнецы': 85, 'Рак': 50, 'Лев': 75, 'Дева': 60, 'Весы': 75, 'Скорпион': 55, 'Стрелец': 70, 'Козерог': 45, 'Водолей': 80, 'Рыбы': 65 },
          'Скорпион': { 'Овен': 45, 'Телец': 80, 'Близнецы': 60, 'Рак': 90, 'Лев': 50, 'Дева': 85, 'Весы': 55, 'Скорпион': 95, 'Стрелец': 40, 'Козерог': 75, 'Водолей': 65, 'Рыбы': 85 },
          'Стрелец': { 'Овен': 85, 'Телец': 55, 'Близнецы': 75, 'Рак': 45, 'Лев': 80, 'Дева': 45, 'Весы': 70, 'Скорпион': 40, 'Стрелец': 90, 'Козерог': 50, 'Водолей': 85, 'Рыбы': 60 },
          'Козерог': { 'Овен': 55, 'Телец': 95, 'Близнецы': 45, 'Рак': 70, 'Лев': 55, 'Дева': 80, 'Весы': 45, 'Скорпион': 75, 'Стрелец': 50, 'Козерог': 85, 'Водолей': 60, 'Рыбы': 90 },
          'Водолей': { 'Овен': 75, 'Телец': 60, 'Близнецы': 90, 'Рак': 55, 'Лев': 65, 'Дева': 50, 'Весы': 80, 'Скорпион': 65, 'Стрелец': 85, 'Козерог': 60, 'Водолей': 75, 'Рыбы': 70 },
          'Рыбы': { 'Овен': 35, 'Телец': 70, 'Близнецы': 50, 'Рак': 95, 'Лев': 60, 'Дева': 65, 'Весы': 65, 'Скорпион': 85, 'Стрелец': 60, 'Козерог': 90, 'Водолей': 70, 'Рыбы': 80 }
        };
        
        const score = compatibilityMap[zodiac1][zodiac2] || 50;
        let text = '';
        if (score >= 80) {
          text = translations[elements.languageSelect.value].high_compatibility.replace('{z1}', zodiac1).replace('{z2}', zodiac2);
        } else if (score >= 60) {
          text = translations[elements.languageSelect.value].moderate_compatibility.replace('{z1}', zodiac1).replace('{z2}', zodiac2);
        } else {
          text = translations[elements.languageSelect.value].low_compatibility.replace('{z1}', zodiac1).replace('{z2}', zodiac2);
        }
        
        return { score, text };
      }
      
      const translations = {
        ru: {
          name: 'Имя:',
          'name-error': 'Пожалуйста, введите ваше имя',
          birth_date: 'Дата рождения:',
          'birth_date-error': 'Пожалуйста, введите корректную дату',
          birth_time: 'Время рождения (необязательно):',
          time_format: 'Формат: чч:мм (24-часовой)',
          birth_city: 'Город рождения:',
          'birth_city-error': 'Пожалуйста, укажите город рождения',
          gender: 'Пол:',
          'gender-error': 'Пожалуйста, выберите пол',
          interest: 'Основной интерес:',
          'interest-error': 'Пожалуйста, выберите интерес',
          relationship: 'Семейное положение:',
          'relationship-error': 'Пожалуйста, укажите семейное положение',
          children: 'Есть ли дети:',
          'children-error': 'Пожалуйста, укажите, есть ли у вас дети',
          favorite_color: 'Любимый цвет:',
          'color-error': 'Пожалуйста, выберите цвет',
          fears: 'Страхи или тревоги (необязательно):',
          newsletter: 'Получать еженедельный астропрогноз',
          save_profile: 'Сохранить анкету',
          daily_forecast: 'Ваш персональный прогноз на день',
          weekly_forecast: 'Ваш персональный прогноз на неделю',
          monthly_forecast: 'Ваш персональный прогноз на месяц',
          compatibility: 'Анализ совместимости',
          your_data: 'Ваши данные:',
          partner_name: 'Имя партнера:',
          'partner_name-error': 'Пожалуйста, введите имя партнера',
          partner_birth_date: 'Дата рождения партнера:',
          'partner_birth_date-error': 'Пожалуйста, введите корректную дату',
          partner_gender: 'Пол партнера:',
          partner_zodiac: 'Знак зодиака партнера:',
          relationship_duration: 'Как долго вы вместе (если применимо):',
          analyze_compatibility: 'Анализировать совместимость',
          compatibility_with: 'Совместимость с вашим партнером:',
          consultation: 'Записаться на персональную консультацию',
          consultation_message: 'Функция персональной консультации будет доступна в следующем обновлении. Спасибо за интерес!',
          back_to_menu: 'Вернуться к меню',
          select: 'Выберите',
          male: 'Мужской',
          female: 'Женский',
          love: 'Любовь и отношения',
          career: 'Карьера и бизнес',
          finance: 'Финансы и инвестиции',
          health: 'Здоровье и благополучие',
          family: 'Семья и дети',
          growth: 'Личностный рост',
          creativity: 'Творчество и вдохновение',
          travel: 'Путешествия и переезды',
          spiritual: 'Духовное развитие',
          education: 'Образование и обучение',
          decisions: 'Важные решения',
          in_relationship: 'В отношениях',
          not_in_relationship: 'Не в отношениях',
          searching: 'В поиске',
          complicated: 'В сложных отношениях',
          yes: 'Да',
          no: 'Нет',
          planning: 'Планируем',
          dont_know: 'Не знаю',
          not_applicable: 'Не применимо',
          less_6m: 'Менее 6 месяцев',
          '6_12m': '6-12 месяцев',
          '1_3y': '1-3 года',
          '3_5y': '3-5 лет',
          more_5y: 'Более 5 лет',
          insufficient_data: 'Недостаточно данных для анализа',
          high_compatibility: '{z1} и {z2} имеют высокую совместимость. Ваши отношения будут гармоничными!',
          moderate_compatibility: '{z1} и {z2} имеют среднюю совместимость. Возможны небольшие разногласия.',
          low_compatibility: '{z1} и {z2} имеют низкую совместимость. Потребуется больше усилий для гармонии.',
          profile_saved: 'Анкета сохранена!',
          forecast_ready: 'Прогноз готов!',
          compatibility_ready: 'Анализ совместимости готов!'
        },
        en: {
          name: 'Name:',
          'name-error': 'Please enter your name',
          birth_date: 'Date of Birth:',
          'birth_date-error': 'Please enter a valid date',
          birth_time: 'Time of Birth (optional):',
          time_format: 'Format: hh:mm (24-hour)',
          birth_city: 'City of Birth:',
          'birth_city-error': 'Please specify city of birth',
          gender: 'Gender:',
          'gender-error': 'Please select gender',
          interest: 'Main Interest:',
          'interest-error': 'Please select an interest',
          relationship: 'Relationship Status:',
          'relationship-error': 'Please specify relationship status',
          children: 'Do you have children:',
          'children-error': 'Please specify if you have children',
          favorite_color: 'Favorite Color:',
          'color-error': 'Please select a color',
          fears: 'Fears or Worries (optional):',
          newsletter: 'Receive weekly astro forecast',
          save_profile: 'Save Profile',
          daily_forecast: 'Your Personal Daily Forecast',
          weekly_forecast: 'Your Personal Weekly Forecast',
          monthly_forecast: 'Your Personal Monthly Forecast',
          compatibility: 'Compatibility Analysis',
          your_data: 'Your Details:',
          partner_name: 'Partner Name:',
          'partner_name-error': 'Please enter partner name',
          partner_birth_date: 'Partner Date of Birth:',
          'partner_birth_date-error': 'Please enter a valid date',
          partner_gender: 'Partner Gender:',
          partner_zodiac: 'Partner Zodiac Sign:',
          relationship_duration: 'How long have you been together (if applicable):',
          analyze_compatibility: 'Analyze Compatibility',
          compatibility_with: 'Compatibility with your partner:',
          consultation: 'Book a Personal Consultation',
          consultation_message: 'Personal consultation feature will be available in the next update. Thank you for your interest!',
          back_to_menu: 'Back to Menu',
          select: 'Select',
          male: 'Male',
          female: 'Female',
          love: 'Love and Relationships',
          career: 'Career and Business',
          finance: 'Finance and Investments',
          health: 'Health and Well-being',
          family: 'Family and Children',
          growth: 'Personal Growth',
          creativity: 'Creativity and Inspiration',
          travel: 'Travel and Relocation',
          spiritual: 'Spiritual Development',
          education: 'Education and Learning',
          decisions: 'Important Decisions',
          in_relationship: 'In a relationship',
          not_in_relationship: 'Not in a relationship',
          searching: 'Searching',
          complicated: 'In complicated relationship',
          yes: 'Yes',
          no: 'No',
          planning: 'Planning',
          dont_know: 'I don’t know',
          not_applicable: 'Not applicable',
          less_6m: 'Less than 6 months',
          '6_12m': '6-12 months',
          '1_3y': '1-3 years',
          '3_5y': '3-5 years',
          more_5y: 'More than 5 years',
          insufficient_data: 'Insufficient data for analysis',
          high_compatibility: '{z1} and {z2} have high compatibility. Your relationship will be harmonious!',
          moderate_compatibility: '{z1} and {z2} have moderate compatibility. Some disagreements may arise.',
          low_compatibility: '{z1} and {z2} have low compatibility. More effort will be needed for harmony.',
          profile_saved: 'Profile saved!',
          forecast_ready: 'Forecast ready!',
          compatibility_ready: 'Compatibility analysis ready!'
        }
      };
      
      function updateLanguage() {
        const lang = elements.languageSelect.value;
        document.querySelectorAll('[data-lang]').forEach(el => {
          const key = el.getAttribute('data-lang');
          if (translations[lang][key]) {
            el.textContent = translations[lang][key];
          }
        });
        updateUserDataDisplay();
        localStorage.setItem('languagePreference', lang);
      }
      elements.languageSelect.addEventListener('change', updateLanguage);
      const savedLanguage = localStorage.getItem('languagePreference');
      if (savedLanguage) {
        elements.languageSelect.value = savedLanguage;
        updateLanguage();
      }
      
      function switchTab(tabId) {
        elements.navButtons.forEach(btn => btn.classList.remove('active'));
        elements.sections.forEach(section => section.classList.remove('active'));
        document.querySelector(`button[data-tab="${tabId}"]`).classList.add('active');
        document.getElementById(tabId).classList.add('active');
      }
      
      elements.navButtons.forEach(btn => {
        btn.addEventListener('click', () => {
          const tabId = btn.getAttribute('data-tab');
          switchTab(tabId);
          if (['daily', 'weekly', 'monthly'].includes(tabId)) {
            loadForecast(tabId);
          }
        });
      });
      
      ['backToMenuProfile', 'backToMenuDaily', 'backToMenuWeekly', 'backToMenuMonthly', 'backToMenuCompatibility'].forEach(id => {
        elements[id].addEventListener('click', () => switchTab('profile'));
      });
      
      function loadFormData() {
        const savedData = localStorage.getItem('profileData');
        if (savedData) {
          const data = JSON.parse(savedData);
          document.getElementById('name').value = data.name || '';
          document.getElementById('birth_date').value = data.birth_date || '';
          if (data.birth_date) {
            const date = new Date(data.birth_date);
            const zodiac = getZodiacSign(date.getDate(), date.getMonth() + 1);
            elements.zodiacDisplay.textContent = zodiac;
            elements.zodiacDisplay.style.display = zodiac ? 'inline-block' : 'none';
          }
          document.getElementById('birth_time').value = data.birth_time || '';
          document.getElementById('birth_city').value = data.birth_city || '';
          document.getElementById('gender').value = data.gender || '';
          document.getElementById('interest').value = data.interest || '';
          document.getElementById('relationship').value = data.relationship || '';
          document.getElementById('children').value = data.children || '';
          document.getElementById('favorite_color').value = data.favorite_color || '#6a5acd';
          document.getElementById('fears').value = data.fears || '';
          document.getElementById('receiveNewsletter').checked = data.receiveNewsletter || false;
          updateUserDataDisplay();
        }
      }
      
      function updateUserDataDisplay() {
        const data = JSON.parse(localStorage.getItem('profileData')) || {};
        const lang = elements.languageSelect.value;
        elements.userData.textContent = data.name && data.zodiac ?
          `${data.name}, ${data.zodiacDisplay.textContent} (${translations[lang][data.gender === 'м' ? 'male' : 'female']})` :
          translations[lang].insufficient_data;
      }
      
      loadFormData();
      
      elements.profileForm.addEventListener('submit', function(e) {
        e.preventDefault();
        let valid = true;
        
        ['name', 'birth_date', 'birth_city', 'gender', 'interest', 'children', 'favorite_color'].forEach(id => {
          const input = document.getElementById(id);
          const error = document.getElementById(`${id}-error`);
          if (!input.value) {
            error.style.display = 'block';
            valid = false;
          } else {
            error.style.display = 'none';
          }
        });
        
        if (valid) {
          elements.saveProfileBtn.disabled = true;
          elements.profileLoader.style.display = 'inline-block';
          
          const formData = new FormData(this);
          const data = Object.fromEntries(formData);
          data.zodiac = elements.zodiacDisplay.textContent;
          localStorage.setItem('profileData', JSON.stringify));
          
          setTimeout(() => {
            elements.saveProfileBtn.disabled = false;
            elements.profileLoader.style.display = 'none';
            elements.notificationBanner.textContent = translations[elements.languageSelect.value].profile_saved;
            elements.notificationBanner.style.display = 'block';
            updateUserDataDisplay();
            setTimeout(() => elements.notificationBanner.style.display = 'none', 3000);
          }, 1500);
        }
      });
      
      function loadForecast(type) {
        const data = JSON.parse(localStorage.getItem('profileData')) || {};
        if (!data.name || !data.birth_date) {
          elements.notificationBanner.textContent = translations[elements.languageSelect.value].insufficient_data;
          elements.notificationBanner.style.display = 'block';
          setTimeout(() => elements.notificationBanner.style.display = 'none', 3000);
          switchTab('profile');
          return;
        }
        
        const content = document.getElementById(`${type}ForecastContent`);
        const dateEl = document.getElementById(`${type}ForecastDate`);
        const lang = elements.languageSelect.value;
        let forecastText, dateText;
        
        switch (type) {
          case 'daily':
            forecastText = `Today, focus on ${data.interest.toLowerCase()]. Your efforts will be rewarded!`;
            dateText = new Date().toLocaleDateString(lang, { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
            break;
          case 'weekly':
            forecastText = `This Week week, explore opportunities in ${data.interest.toLowerCase()].}. Success is on the horizon!`;
            dateText = new Date().toLocaleDateString(lang, { month: 'long', year: 'numeric' });
            break;
          case 'monthly':
            forecastText = `This month, ${data.interest.toLowerCase()]} will bring new possibilities. Stay open!`;
            dateText = new Date().toLocaleDateString(lang, month: 'long', year: 'numeric' });
            break;
        }
        
        content.innerHTML = `
          <div class="forecast-section">
            <h3><i class="fas fa-star"></i>${translations[lang][`${type}_forecast`]}</h3>
            <p>${forecastText}</p>
          </div>
        dateEl.textContent = dateText;
        
        elements.notificationBanner.textContent = translations[lang].forecast_ready;
        elements.notificationBanner.style.display = 'block';
        setTimeout(() => elements.notificationBanner.style.display = 'none', 3000);
      }
      
      elements.compatibilityForm.addEventListener('submit', function(e) => {
        e.preventDefault();
        let valid = true;
        
        ['partner_name', 'partner_birth_date', 'partner_gender'].forEach(id => {
          const input = document.getElementById(id);
          const error = document.getElementById(`${id}-error`);
          if (!input.value) {
            error.style.display = 'block';
            valid = false;
          } else {
            error.style.display = 'none';
          }
        });
        
        if (valid) {
          elements.analyzeCompatibilityBtn.disabled = true;
          elements.compatibility_loader.style.display = 'inline-block';
          
          const userZodiac = elements.zodiacDisplay.textContent;
          const partnerZodiac = document.getElementById('partner_zodiac').value || elements.partnerZodiacDisplay.textContent;
          
          setTimeout(() => {
            const compat = calculateCompatibility(userZodiac, partnerZodiac);
            elements.compatibilityProgress.style.width = `${compat.score}%`;
            elements.compatibilityText.textContent = compat.text;
            elements.compatibilityResult.style.display = 'block';
            
            elements.analyzeCompatibilityBtn.disabled = false;
            elements.compatibilityLoader.style.display = 'none';
            elements.notificationBanner.textContent = translations[elements.languageSelect.value].compatibility_ready;
            elements.notificationBanner.style.display = 'block';
            setTimeout(() => elements.notificationBanner.style.display = 'none', 3000);
          }, 1500);
        }
      });
      
      ['consultationDailyBtn', 'consultationWeeklyBtn', 'consultationMonthlyBtn'].forEach(id => {
        elements[id].addEventListener('click', () => {
          elements[`${id.replace('Btn', 'Message')}`].style.display = 'block';
          setTimeout(() => elements[`${id.replace('Btn', 'Message')}`].style.display = 'none', 5000);
        });
      });
      
      if (tg && tg.initDataUnsafe.user) {
        document.getElementById('name').value = tg.initDataUnsafe.user.first_name || '';
      }
    });
  </script>
</body>
</html>
